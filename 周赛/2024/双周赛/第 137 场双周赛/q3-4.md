è¿™æ˜¯æˆ‘ç¬¬äºŒæ¬¡æ‰“è¿›å‰200ï¼Œä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡æ‰“è¿›å‰100ï¼Œè¿˜æ˜¯ç¬¬ä¸€æ¬¡æ‰“è¿›å‰50ï¼Œæ›´æ˜¯ç¬¬ä¸€æ¬¡æ‰“è¿›å‰30ï¼ˆè‡³å°‘ç›®å‰æ˜¯29ï¼‰ï¼ï¼ï¼
æ‰€ä»¥æˆ‘å¥½æ…Œå¼ ï¼Œæ„Ÿè§‰è¿™æ–¹æ³•å°±æŠŠç¬¬å››é¢˜è¿‡äº†æœ‰äº›ä¸å¤ªå¯¹åŠ²â€¦

---

å°†æ¯ä¸ªæ ¼å­çš„å€¼ $x$ å’Œåæ ‡ $(i,j)$ ä½œä¸ºä¸‰å…ƒç»„ $(x,i,j)$ æ”¾åˆ° $a$ é‡Œï¼Œå€’åºæŽ’åºã€‚

éåŽ† $a$ ä¸­æ‰€æœ‰å…ƒç´ ï¼Œå–å‡ºç¬¬ä¸€ä¸ªæ ¼å­çš„ä¿¡æ¯ $(s,x,y)$ ï¼Œç„¶åŽåœ¨åŽé¢å–å‡ºç¬¬äºŒä¸ª $(b,xx,yy)$
ï¼Œå¦‚æžœè¿™ä¸¤ä¸ªåœ¨åŒä¸€è¡Œæˆ–è€…åŒä¸€åˆ—å°±è·³è¿‡ï¼Œç›´åˆ°ä¸åŒè¡Œä¸ç”¨åˆ—çš„ä¸ºæ­¢å°†å…¶ä½œä¸ºç¬¬äºŒä¸ªæ ¼å­ï¼Œå¹¶å°† $b$ åŠ åˆ° $s$ ä¸­ã€‚æŽ¥ç€ç”¨åŒæ ·çš„æ–¹æ³•æ‰¾ç¬¬ä¸‰ä¸ªæ ¼å­ã€‚

ç”±äºŽæ˜¯å€’åºæŽ’åºï¼Œ

1. ä¸€æ—¦æ‰¾åˆ°ä¸€ä¸ªåˆé€‚ç¬¬ä¸‰ä¸ªæ ¼å­ï¼Œé‚£ä¹ˆå°±ä¸ç”¨è€ƒè™‘åŽé¢çš„äº†ã€‚
2. æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªæ ¼å­çš„å€¼çš„ä¸‰å€å¦‚æžœæ¯”ç›®å‰çš„æœ€ä½³ç­”æ¡ˆ $ans$ è¦å°ï¼Œåˆ™å¯ä»¥ç›´æŽ¥å°† $ans$ è¿”å›žäº†ã€‚
3. ç¬¬ä¸€ä¸ªæ ¼å­çš„å€¼ $s$ åŠ ä¸Šä¸¤å€çš„ç¬¬äºŒä¸ªæ ¼å­çš„å€¼ä¸æ¯” $ans$ å¤§ï¼Œå°±å¯ä»¥é€€å‡ºç»§ç»­å¯»æ‰¾ç¬¬äºŒä¸ªæ ¼å­çš„å¾ªçŽ¯äº†ã€‚

```python
class Solution:
    def maximumValueSum(self, board: List[List[int]]) -> int:
        a = []
        for i, row in enumerate(board):
            for j, x in enumerate(row):
                a.append((x, i, j))
        a.sort(reverse=True)
        ans = -inf
        n = len(a)
        for i in range(n):
            s, x, y = a[i]
            if s * 3 <= ans:
                return ans
            for j in range(i + 1, n):
                b, xx, yy = a[j]
                if s + b * 2 <= ans:
                    break
                if xx == x or yy == y:
                    continue
                ns = s + b
                for k in range(j + 1, n):
                    c, xxx, yyy = a[k]
                    if xxx == xx or xxx == x or yyy == yy or yyy == y:
                        continue
                    ns += c
                    ans = max(ans, ns)
                    break
        return ans
```

---

æžœç„¶ï¼Œä¸Šé¢çš„ä»£ç åœ¨ä¸€äº›æµ‹è¯•ç”¨ä¾‹ä¸‹ä¼šè¶…æ—¶ï¼ˆè¶…æ—¶ç”¨ä¾‹å¯ä»¥åœ¨è¯„è®ºåŒºé‡Œæ‰¾ï¼‰ã€‚

ä½†æˆ‘åœ¨æäº¤ç»“æžœçš„æ‰§è¡Œç”¨æ—¶åˆ†å¸ƒé‡Œçœ‹åˆ°äº†æ›´åŽ‰å®³çš„ä»£ç ï¼Œè¿™é‡Œå°è¯•è§£é‡Šä¸€ä¸‹ã€‚

éåŽ† $board$ çš„æ¯ä¸€è¡Œï¼Œå–å‡ºæ¯ä¸€è¡Œçš„æœ€å¤§çš„ä¸‰ä¸ªï¼Œå¹¶å°†å…¶åŠ å…¥åˆ° $d[j]$ ä¸­ï¼ˆ $j$ æ˜¯åˆ—å·ï¼‰ã€‚è¿™æ ·ï¼Œ$d[j]$ ä¸­çš„æ¯ä¸€é¡¹ $(x,i)$ éƒ½æ˜¯ç¬¬
$i$ è¡Œå‰ 3 å¤§çš„æ•°ã€‚

éåŽ† $d$ ä¸­çš„æ¯ä¸€é¡¹ï¼Œæ‰¾åˆ°æ¯ä¸€é¡¹æœ€å¤§çš„ 3 ä¸ªç•™ä¸‹ï¼Œç„¶åŽå¯¹ $d$ è¿›è¡Œå€’åºæŽ’åºï¼Œè®°åš $a$ã€‚è¿™æ · $a$
ä¸­çš„æ¯ä¸€ä¸ªé¡¹éƒ½æœ‰ä¸‰ä¸ªå…ƒç´ ï¼Œè¿™ä¸‰ä¸ªå…ƒç´ æ˜¯åŒä¸€åˆ—ä¸åŒè¡Œçš„æ•°ï¼Œæ¯ä¸ªæ•°éƒ½æ˜¯å¯¹åº”åˆ—å¯¹åº”è¡Œçš„å‰ä¸‰å¤§çš„æ•°ï¼Œ

æŽ¥ä¸‹æ¥å°±æ˜¯æ‰¾åˆ° 3 ä¸ªæ ¼å­ã€‚

ç”¨ä¸‰é‡å¾ªçŽ¯æ‹¿åˆ° $a$ ä¸­çš„ä¸‰ä¸ªé¡¹ï¼Œä¹Ÿå°±æ˜¯ä¸‰ä¸ªä¸åŒçš„åˆ—ï¼Œå†åœ¨é‡Œé¢æ‰¾ä¸‰ä¸ªä¸åŒè¡Œçš„æ ¼å­ï¼Œè®¡ç®—ä¸‰ä¸ªæ ¼å­çš„å’Œæ›´æ–°ç­”æ¡ˆã€‚

ç”±äºŽæ˜¯æŽ’å¥½åºäº†ï¼Œé™¤äº†æˆ‘ä¸Šé¢æ”¾çš„çš„å‰ªæžå¤–ï¼Œåœ¨æ‰¾ç¬¬ä¸‰ä¸ªæ ¼å­çš„æ—¶å€™ï¼Œå¦‚æžœå‰ä¸¤ä¸ªæ ¼å­çš„å€¼åŠ ä¸Šè¿™ä¸ªâ€œç¬¬ä¸‰ä¸ªæ ¼å­â€çš„å€¼å°äºŽç­‰äºŽ
$ans$ï¼Œä¹Ÿå¯ä»¥ç›´æŽ¥ $break$ å¯»æ‰¾ç¬¬ä¸‰ä¸ªæ ¼å­ï¼Œæ¢ä¸‹ä¸€ä¸ªå¯è¡Œçš„ç¬¬äºŒä¸ªæ ¼å­ã€‚

```python
class Solution:
    def maximumValueSum(self, board: List[List[int]]) -> int:
        if len(board) > len(board[0]):
            board = zip(*board)
        d = defaultdict(list)
        for i, r in enumerate(board):
            r = nlargest(3, ((x, j) for j, x in enumerate(r)))
            for x, j in r:
                d[j].append((x, i))
        a = sorted((nlargest(3, v) for v in d.values()), reverse=True)
        n, ans = len(a), -inf
        for i in range(n - 2):
            if a[i][0][0] * 3 <= ans:
                break
            for x, i1 in a[i]:
                for j in range(i + 1, n - 1):
                    if x + a[j][0][0] * 2 <= ans:
                        break
                    for y, j1 in a[j]:
                        if i1 == j1:
                            continue
                        y += x
                        for k in range(j + 1, n):
                            if y + a[k][0][0] <= ans:
                                break
                            for z, k1 in a[k]:
                                if i1 != k1 and j1 != k1:
                                    ans = max(ans, y + z)
                                    break
        return ans
```

ä¸çŸ¥é“æˆ‘è§£é‡Šçš„å¯¹ä¸å¯¹ï¼Œä¹Ÿä¸çŸ¥é“æ˜¯å“ªä½å¤§ä½¬å†™çš„ï¼Œä¿ºå°±ç›´æŽ¥æ”¾è¿›æˆ‘çš„é¢˜è§£äº†â€¦â€¦ðŸ˜¯
